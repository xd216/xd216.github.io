<h3 id="section">添加资源的方便之门</h3>

<p>将资源文件放置在<code>/grails-app/assets/</code>目录下,不同资源分开,分别是<code>images</code>,<code>javascripts</code>,<code>stylesheets</code>三个子目录</p>

<p>gsp文件中引用资源只需如下:</p>

<p><code>html
&lt;asset:javascript src="application.js"/&gt;
&lt;asset:stylesheet href="application.css"/&gt;
&lt;asset:image src="grails_logo.png" height="60" /&gt;
</code></p>

<h3 id="gorm">更好用的GORM子查询</h3>

<ul>
  <li>嵌套子查询</li>
</ul>

<p><code>groovy
def results = Person.where{
	firstname in where {age &lt; 18}.firstname
}.list()
</code></p>

<ul>
  <li>Criteria 与 where 结合使用</li>
</ul>

<p><code>groovy
def result = Person.withCriteria{
	notIn "firstname",Person.where {age &lt; 18}.firstname
}
</code></p>

<ul>
  <li>联合两个domain的相关查询</li>
</ul>

<p><code>groovy
def employees = Employee.where {
    region.continent in ['APAC', "EMEA"]
}.id()
def results = Sale.where {
    employee in employees &amp;&amp; total &gt; 100000
}.employee.list()
</code></p>

<ul>
  <li>支持简单变量声明的别名进行查询</li>
</ul>

<p><code>groovy
def query = Employee.where {
    def em1 = Employee
    exists Sale.where {
        def s1 = Sale
        def em2 = employee
        return em2.id == em1.id
    }.id()
}
def results = query.list()
</code></p>

<h3 id="section-1">支持异步处理请求</h3>

<p><code>groovy
def index() {
    def ctx = startAsync()
    ctx.start {
        new Book(title:"The Stand").save()
        render template:"books", model:[books:Book.list()]
        ctx.complete()
    }
}
</code></p>

<p>参考 <code>http://grails.org/doc/latest/guide/single.html#async</code></p>

<p><code>groovy
import static grails.async.Promises.*
//...
def index() {
  	 tasks books: Book.async.list(),
         totalBooks: Book.async.count(),
         otherValue: {
           // do hard work
         }
}
</code></p>

