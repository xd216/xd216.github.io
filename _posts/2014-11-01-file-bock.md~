---
layout: post
title: 文件锁定
catigories: 其他
tags: lock
---

####在控制多个进程并行访问共同资源方面,需要用到文件锁定机制.数据库等复杂应用非常依赖文件锁定机制.

####使用文件锁定可以控制共享资源的更新,或用于事务隔离.

####文件锁定有两种方式:`共享锁`和`独占锁`

* 共享锁: 用于多个进程读取共享资源.每个进程在读取共享资源之前,都会取得该资源的共享锁,读取操作完成,释放共享锁.进程读取期间,其他进程也可以取得共享锁,进行读取操作.两进程可以并行读取,互不影响.

* 独占锁: 用于进程更新共享资源的情况.进程欲更新共享资源,会检查是否有进程持有该资源的锁(包括共享锁和独占锁),若有,阻塞并等待,直到所有锁都释放. 一旦进程获得独占锁,意味着共享资源要被更新了,其他想要获取锁的进程会被阻塞,直到独占锁释放.保证数据一致性.
