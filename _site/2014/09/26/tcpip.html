<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>xd216Lab|Blog</title>

    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css">
    <script src="/javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="http://xd216.github.io">xd216 Lab Blog</a></h1>
        <p>文艺搞不好，只能搞技术</p>
        <p class="view"><a href="https://github.com/xd216/xd216.github.io">View the Project on GitHub <small>xd216</small></a></p>
        <ul>
          <li>
		<a href="https://github.com/xd216/xd216.github.io">
			View On <strong>GitHub</strong>
		</a>
	    </li>
        </ul>
      </header>
      <section>
        <h1>
<a name="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages"><span class="octicon octicon-link"></span></a> 
TCP/IP 协议要点 
        </h1>
<h2>TCP 协议三次握手，四次挥手</h2>

<ul>
<li>三次握手</li>
</ul>
<div class="highlight"><pre><code class="language-text" data-lang="text">    SYN, seq = x    
A -----------------&gt; B

    ACK = x + 1, seq = y
A &lt;----------------- B

    ACK = y + 1
A -----------------&gt; B

</code></pre></div>
<p>三次握手从根本上来讲是为了保证在一个不可信的信道上，进行可信的传输。在三次握手中，双方告知对方自己的序列号，并给出 ACK 确认，
有了序列号，就可以知道此后的传输是否乱序，是否重复，保证可靠的传输。</p>

<p>从建立连接的角度看，如果两次握手，假如客户端发出的一个请求连接的包在某个网络节点长时间滞留，那么客户端会发出新的请求，这次
请求正常到达，并与服务器通信，随后，通信关闭。此时，之前滞留的请求连接的包到达服务器，如果是两次握手，服务器就会建立连接，并等待
客户端发送数据，但是客户端永远不会发送数据。</p>

<ul>
<li>四次挥手</li>
</ul>
<div class="highlight"><pre><code class="language-text" data-lang="text">    FIN seq=x+3, ACK=y+1    
A -----------------&gt; B

    ACK=x+3
A &lt;----------------- B

    FIN seq=y+1
A &lt;----------------- B

    ACK = y + 2
A -----------------&gt; B
</code></pre></div>
<p>四次挥手的原因在于 TCP 的全双工通信，两端都需要发出 FIN，表示自己不再发送数据，并且给对方的 FIN 发出 ACK 确认。</p>

      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/minixalpha">minixalpha</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
  </body>
</html>
